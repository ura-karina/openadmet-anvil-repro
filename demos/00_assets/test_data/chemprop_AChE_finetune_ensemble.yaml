data:
  cat_entry: null
  input_col: OPENADMET_SMILES
  resource: openadmet/models/tests/unit/test_data/ACEH_chembl_pchembl.csv
  target_cols: pchembl_value_mean
  type: intake

metadata:
  authors: Hugo M-O
  biotargets:
  - Acetylcholinesterase
  build_number: 0
  description: basic regression with combined fingerprint and descriptor features
    using a ChemProp single task model
  driver: pytorch
  email: hugo.macdermott-opeskin@omsf.io
  name: Acetylcholinesterase_pchembl_testing_chemprop
  tag: openadmet-Acetylcholinesterase-pchembl-regression-testing-cv
  tags:
  - Acetylcholinesterase
  - openadmet
  - test
  - pchembl
  version: v1

procedure:
  feat:
    type: ChemPropFeaturizer
    params: {}

  model:
    type: ChemPropModel
    params: {}
    freeze_weights:
      message_passing: true
      batch_norm: false
      ffn_layers: 0

  ensemble:
    type: CommitteeRegressor
    n_models: 3
    serial_paths: [
      openadmet/models/tests/unit/test_data/aceh_chemprop_anvil_model_dir/model.pth,
      openadmet/models/tests/unit/test_data/aceh_chemprop_anvil_model_dir/model.pth,
      openadmet/models/tests/unit/test_data/aceh_chemprop_anvil_model_dir/model.pth
    ]
    param_paths: [
      openadmet/models/tests/unit/test_data/aceh_chemprop_anvil_model_dir/model.json,
      openadmet/models/tests/unit/test_data/aceh_chemprop_anvil_model_dir/model.json,
      openadmet/models/tests/unit/test_data/aceh_chemprop_anvil_model_dir/model.json
    ]

  split:
    type: ShuffleSplitter
    params:
      random_state: 42
      test_size: 0.2
      train_size: 0.7
      val_size: 0.1

  train:
    type: LightningTrainer
    params:
      accelerator: cpu
      max_epochs: 1
      use_wandb: false

report:
  eval:
  - type: RegressionMetrics
    params: {}

  - type: RegressionPlots
    params:
      axes_labels:
      - True pChEMBL
      - Predicted pChEMBL
      max_val: 10
      min_val: 3
      pXC50: true
      title: Multitask True vs Predicted pChEMBL on test set
